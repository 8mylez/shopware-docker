#!/usr/bin/env bash

FILE="$0"

if [ -L "$0" ]; then
  FILE=$(readlink "$0")
fi

DIR=$(dirname ${FILE})

export DIR=${DIR}

source "${DIR}/functions.sh"

# Need to be in docker folder for docker-compose
cd ${DIR}

FOUNDCLI=false
export MODULES="base"

for command in ./modules/base/*.sh; do
    NAME=$(basename $command)
    NAME=${NAME%.*}

    if [[ $NAME == $1 ]]; then
        source $command
        FOUNDCLI=true
    fi
done

if [[ $FOUNDCLI == false ]]; then
    docker-compose exec cli bash /opt/swdc/swdc-inside "$@"
fi